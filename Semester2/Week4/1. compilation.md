# Сборка C++
## Этапы сборки
! В тексте ниже будут указаны команды компиляции, чтобы получить результат каждого этапа из исходного файла, а не из результата предыдущего этапа
1. Препроцессинг. Обработка дериктив препроцессора (раскрытие инклюдов, макросов и т д.)
   > Директивы препроцессора это всё то, что начинается с символа `#`
   
   > `clang++ -E <source.cpp> -o <output>`
2. Компиляция
    1. Перевод C++ кода в assembler
       > `clang++ -S <source.cpp> -o <source.s>`
    3. Перевод в из ассемблера бинарный код. Получаемый файл называют объектным
       > `clang++ -c <source.cpp> -o <source.o>` (в данной команде стадия ассемлера пропускается)
3. Линковка. Разрешаются все вызовы функций. До этой стадии в местах вызова функций стояли заглушки. Линковщик подставляет в эти места реальные адреса функций. Если у вас была объявлена функция, но не определена - ошибку получите на этом этапе (`undefined reference`)
   > `clang++ <source.cpp> -o <executable>`

## Линковка
Линковка бывает внутренняя и внешняя
1. Внешняя линковка `(external)` не ограничивает видимость функции или глобальной переменной. Её можно вызвать из любой единицы трансляции. По умолчанию линковка всегда внешняя
2. Внутренняя `(internal)` линковка ограничивает видимость функции (или глобальной переменной) одной единицей трансляции. Функцию (или глобальную переменную) можно сделать с internal линковкой, если пометить ключевым словом `static`

## Шаблоны и линковка
Шаблонные функции нельзя линковать. Потому что они не являются символами линковки. Они лишь представляют собой рецепт для компилятора. Поэтмому их необходимо писать в заголовочный файлах, если они используются не только лишь в одной единице трансляции. Поэтому код на C++ так долго собирать
